---
title: Android图片加载机制的再学习
date: 2016-05-31 00:34:44
tags: Android
categories: Android

---

### Bitmap高效加载

 - 原始图片尺寸很大的时候，直接加载是不合适的。通过BitmapFactory.Options,按照一定的采样率加载缩小后的图片，一定程度上避免了OOM从而提高了加载Bitmap的性能。
 - 此外注意inSample的取值应该为2的倍数。如果取其他取值，会向下搜寻最接近的替代（3->2）。去采样率的时候，接近imageView时取大不取小。

### 缓存
日常使用的缓存算法Lru(least recently used),此算法优先淘汰掉那些近期最少使用的缓存对象。

#### LruCache
一个泛型类，Android3.1提供的，但为了兼容建议使用v4包中的。内部采用LinkedHashMap实现，以强引用的方式存储外界的缓存对象。

#### DiskLruCache
用于存储设备缓存,即磁盘缓存.得到官方文档推荐,但它不属于Android SDK的一部分.具体用法详见源码,本篇不赘述.

### ImageLoader
一个优秀的ImageLoader应该具备如下功能.

 1. 图片的同步加载(以同步的方式调用所加载图片)
 2. 图片的异步加载
 3. 图片压缩
 4. 内存缓存
 5. 磁盘缓存
 6. 网络拉取

>以上笔记均理解参考*Android开发艺术探索* 
>
>这是一本非常棒的书，值得一看